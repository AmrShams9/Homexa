<!-- <h3 onclick="toggleVisibility('smart')">خدمات سمارت 🔽</h3>
<div id="smart" style="display:none;"> -->
  <div class="service-item">
    <label>
      <input type="checkbox" data-id="6" data-price="120" onchange="toggleQuantity(this)">
      تثبيت القفل الذكي للباب بدون برمجة (<span class="service-price">120</span> SAR)
    </label>
    <input type="number" class="qty-input" placeholder="الكمية" min="1" value="1"
           style="display:none; margin-right: 10px;">
  </div>
  
  <div class="service-item">
    <label>
      <input type="checkbox" data-id="8" data-price="200" onchange="toggleQuantity(this)">
      تركيب انتركوم (<span class="service-price">200</span> SAR)
    </label>
    <input type="number" class="qty-input" placeholder="الكمية" min="1" value="1"
           style="display:none; margin-right: 10px;">
  </div>
  
  <div class="service-item">
    <label>
      <input type="checkbox" data-id="20" data-price="50" onchange="toggleQuantity(this)">
      تركيب جرس (<span class="service-price">50</span> SAR)
    </label>
    <input type="number" class="qty-input" placeholder="الكمية" min="1" value="1"
           style="display:none; margin-right: 10px;">
  </div>
  
  <div class="service-item">
    <label>
      <input type="checkbox" data-id="65" data-price="120" onchange="toggleQuantity(this)">
      صيانة انتركوم (<span class="service-price">120</span> SAR)
    </label>
    <input type="number" class="qty-input" placeholder="الكمية" min="1" value="1"
           style="display:none; margin-right: 10px;">
  </div>
  
      
      <!-- </div> -->
      <script>
        function toggleQuantity(checkbox) {
  const container = checkbox.closest('.service-item');
  const qtyInput = container.querySelector('.qty-input');

  if (checkbox.checked) {
    qtyInput.style.display = 'inline-block';
    qtyInput.required = true;
  } else {
    qtyInput.style.display = 'none';
    qtyInput.required = false;
    qtyInput.value = 1;
  }

  updateServicePrice(container);
  calculateTotalPrice();
}
function updateServicePrice(container) {
  const checkbox = container.querySelector('input[type="checkbox"]');
  const priceSpan = container.querySelector('.service-price');
  const qty = parseInt(container.querySelector('.qty-input')?.value || 1);
  const basePrice = parseFloat(checkbox.dataset.price);

  const total = checkbox.checked ? basePrice * qty : basePrice;
  priceSpan.textContent = total.toFixed(2);
}
document.addEventListener("input", function (event) {
  if (event.target.classList.contains("qty-input")) {
    const container = event.target.closest(".service-item");
    updateServicePrice(container);
    calculateTotalPrice();
  }
});

        </script>
      